
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Derived Schemas - LinkML Model</title>
<link href="../../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="amber" data-md-color-primary="teal" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#derived-schemas">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="LinkML Model" class="md-header__button md-logo" data-md-component="logo" href="../.." title="LinkML Model">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            LinkML Model
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Derived Schemas
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="amber" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="teal" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="amber" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="LinkML Model" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="LinkML Model">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    LinkML Model
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../home/">
        About
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Specification
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Specification" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Specification
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
        Index
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../00preamble/">
        Preface
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../01introduction/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../02instances/">
        Instances
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03schemas/">
        Schema Datamodel
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Derived Schemas
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Derived Schemas
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#conventions">
    Conventions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
    Functions
  </a>
<nav aria-label="Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#list-function">
    List Function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#closure-function">
    Closure Function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-parents">
    Function: Parents
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-ancestors">
    Function: Ancestors
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#derivation-rules">
    Derivation Rules
  </a>
<nav aria-label="Derivation Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-merge-imports-closure">
    Rule: Merge Imports Closure
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-fromschema-elements">
    Rule: fromschema elements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-applicable-slot-names">
    Rule: Applicable Slot Names
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-derived-attributes">
    Rule: Derived Attributes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-default-range">
    Rule: Default Range
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-derived-class-and-slot-uris">
    Rule: Derived Class and Slot URIs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-generation-of-patterns-from-structured-patterns">
    Rule: Generation of patterns from structured patterns
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-generation-of-classdefinitionreferences">
    Rule: Generation of ClassDefinitionReferences
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structural-conformance-rules">
    Structural Conformance Rules
  </a>
<nav aria-label="Structural Conformance Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-each-referenced-entity-must-be-present">
    Rule: Each referenced entity must be present
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classdefinition-structural-conformance-rules">
    ClassDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#slotdefinition-structural-conformance-rules">
    SlotDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#typedefinition-structural-conformance-rules">
    TypeDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#enumdefinition-structural-conformance-rules">
    EnumDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classdefinitionreference-structural-conformance-rules">
    ClassDefinitionReference Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metamodel-conformance-rules">
    Metamodel Conformance Rules
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05validation/">
        Instance Validation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06mapping/">
        Mapping of Instances
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Appendix
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Appendix" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Appendix
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Metamodel Index
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2">
          Profiles
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Profiles" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
          Profiles
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../MinimalSubset/">
        MinimalSubset
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../BasicSubset/">
        BasicSubset
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../SpecificationSubset/">
        SpecificationSubset
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../RelationalModelProfile/">
        RelationalModelProfile
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ObjectOrientedProfile/">
        ObjectOrientedProfile
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../OwlProfile/">
        OwlProfile
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#conventions">
    Conventions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
    Functions
  </a>
<nav aria-label="Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#list-function">
    List Function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#closure-function">
    Closure Function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-parents">
    Function: Parents
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-ancestors">
    Function: Ancestors
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#derivation-rules">
    Derivation Rules
  </a>
<nav aria-label="Derivation Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-merge-imports-closure">
    Rule: Merge Imports Closure
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-fromschema-elements">
    Rule: fromschema elements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-applicable-slot-names">
    Rule: Applicable Slot Names
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-derived-attributes">
    Rule: Derived Attributes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-default-range">
    Rule: Default Range
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-derived-class-and-slot-uris">
    Rule: Derived Class and Slot URIs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-generation-of-patterns-from-structured-patterns">
    Rule: Generation of patterns from structured patterns
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-generation-of-classdefinitionreferences">
    Rule: Generation of ClassDefinitionReferences
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structural-conformance-rules">
    Structural Conformance Rules
  </a>
<nav aria-label="Structural Conformance Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rule-each-referenced-entity-must-be-present">
    Rule: Each referenced entity must be present
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classdefinition-structural-conformance-rules">
    ClassDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#slotdefinition-structural-conformance-rules">
    SlotDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#typedefinition-structural-conformance-rules">
    TypeDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#enumdefinition-structural-conformance-rules">
    EnumDefinition Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classdefinitionreference-structural-conformance-rules">
    ClassDefinitionReference Structural Conformance Rules
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metamodel-conformance-rules">
    Metamodel Conformance Rules
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="derived-schemas">Derived Schemas</h1>
<p>This section describes rules that can be applied to a schema to obtain a <em>derived</em> schema.</p>
<p>The derived schema can be <em>materialized</em>, or it may be present as a <em>view</em> onto a schema.</p>
<p>Derived schemas are also known as <em>induced</em> schemas or <em>inferred</em> schemas.</p>
<div class="mermaid">flowchart TD
    M[Asserted Schema] --&gt;|input| Derivation{Derivation Procedure}
    Derivation --&gt;|ouput| Mstar[Derived Schema]
    R[Rules] --&gt;|input| Derivation
</div>
<p>Derivations happen via <em>derivation rules</em>, using a collection of defined <em>functions</em>.</p>
<h2 id="conventions">Conventions</h2>
<p>We use <em>m</em> to denote the input or asserted schema (model), and <em>m<sup>D</sup></em> to denote the derived schema</p>
<h2 id="functions">Functions</h2>
<h3 id="list-function">List Function</h3>
<p>The function <strong>L</strong>(<em>v</em>) returns a list version of the input:</p>
<ul>
<li><em>v</em> when <em>v</em> is a collection</li>
<li>[  ] when <em>v</em> is None</li>
<li>[ <em>v</em> ] otherwise</li>
</ul>
<h3 id="closure-function">Closure Function</h3>
<p>The function <strong>C</strong>(<em>e</em>, <em>f</em>) takes as input an element <em>e</em> and a function <em>f</em> and returns
the mathematical closure of <em>f</em> </p>
<p>The <em>ReflexiveClosure</em> <strong>C<sup>*</sup></strong> includes <em>e</em></p>
<h3 id="function-parents">Function: Parents</h3>
<p><strong>Parents</strong> itself is the union of <code>is_a</code> and <code>mixins</code>.</p>
<blockquote>
<p><strong>P</strong>(<em>e</em>) = <strong>L</strong>(<em>e</em>.<code>is_a</code>) ∪ <strong>L</strong>(<em>e</em>.<code>mixins</code>) }</p>
</blockquote>
<h3 id="function-ancestors">Function: Ancestors</h3>
<p>The ancestors function <strong>A</strong> returns the <strong>Closure</strong> of the <strong>Parents</strong> function.</p>
<blockquote>
<p><strong>A</strong>(<em>e</em>) = <strong>C</strong>(<em>e</em>, <strong>A</strong>)</p>
</blockquote>
<p>The function <strong>ReflexiveAncestors</strong> uses the <strong>ReflexiveClosure</strong>.</p>
<h2 id="derivation-rules">Derivation Rules</h2>
<p>The following rules are applied to deduce a derived schema</p>
<h3 id="rule-merge-imports-closure">Rule: Merge Imports Closure</h3>
<p>Each model imports zero to many imports, indicated by the <strong>SchemaDefinition</strong>.<a href="https://w3id.org/linkml/imports">imports</a> metaslot.</p>
<p><em>m<sup>D</sup></em> is set to include the union of all schema elements from the <strong>ReflexiveClosure</strong> of <code>m.imports</code>, such
that the following holds:</p>
<blockquote>
<p><em>m<sup>D</sup></em>.<em>metaslot</em> = <em>v</em> iff <em>m'</em> ∈ <strong>R<sup>C</sup></strong>(<em>m</em>.<code>imports</code>) and <em>m'</em>.<em>metaslot</em> = <em>v</em>
and <em>metaslot</em> ∈ {<code>classes</code>, <code>slots</code>, <code>types</code>, <code>enums</code>}</p>
</blockquote>
<pre><code>*m&lt;sup&gt;D&lt;/sup&gt;*
</code></pre>
<p>When copying an element <code>x</code> from an import into <em>m<sup>D</sup></em>, the name <code>x.name</code> must be unique - if the same name has been used in another model, the derivation procedure fails, and an error is thrown.</p>
<p><strong>Note</strong>: If two or more models import the same target (e.g. <code>m1</code> imports <code>m2</code> and <code>m3</code> and <code>m2</code> imports <code>m3</code>), <code>m3</code> will be only be resolved once.</p>
<p><strong>Note</strong>: Two models are considered to be "identical" if they both 
have the same <code>id</code>.  If <code>m2</code> and <code>m3</code> both have <code>id: http://models-r.us/modelA</code>, it is assumed that, despite the different location, they represent the same thing.  LinkML <em>will</em> check the model <code>version</code> field and will raise an error if <code>m2</code> has <code>version: 1.0.0</code> and <code>m3</code> has <code>version: 1.0.1</code></p>
<p>Each imported module must be resolved - i.e the value of the import slot is mapped to a location on disk or on the web</p>
<h3 id="rule-fromschema-elements">Rule: fromschema elements</h3>
<p>Each element in the schema as assigned a metaslot <code>fromschema</code> value. This is the value of the <code>id</code> of the schema in which that element is defined.</p>
<p>This is preserved over imports, such that if <em>m</em> imports <code>m2</code>, and <code>m2</code> defines a class <code>c</code>, then <em>m<sup>D</sup></em><code>[c].fromschema</code> = m2</p>
<h3 id="rule-applicable-slot-names">Rule: Applicable Slot Names</h3>
<p>The set of applicable slot names for a class <code>c</code> are determined by taking the union of:</p>
<ul>
<li>The names of all values of <code>x.attributes</code></li>
<li>The names of all values of <code>x.slots</code></li>
</ul>
<p>For all <code>x</code> in <code>ReflexiveAncestors(c)</code></p>
<h3 id="rule-derived-attributes">Rule: Derived Attributes</h3>
<p>Derived attributes can be calculated for every <em>applicable</em> slot name <code>s</code> for any class <code>c</code></p>
<p><code>c.attributes[s] = DerivedAttributes(c,s)</code></p>
<p>This is the combination of <em>asserted</em> attributes for c, as well as asserted attributes for ancestors of c,
as well as the SlotDefinition corresponding to that attribute, together with any overrides specified by <code>slot_usage</code> in <code>c</code>
and ancestors of <code>c</code></p>
<ul>
<li>attributes asserted directly in <code>c.attributes</code> in the base schema</li>
<li>attributes derived from each SlotDefinition <code>s</code> in <code>c.slots</code> by<ul>
<li>looking up <code>s</code> in <em>m<sup>D</sup></em><code>.slots</code> and copying the slot-value assignments from these SlotDefinitions</li>
<li>overriding these slot-value assignments with any slot-value assignments provided by <code>c.slot_usage[s]</code></li>
</ul>
</li>
<li>inheriting from parents of <code>c</code> using precedence rules</li>
<li>inheriting from parents of <code>s</code></li>
</ul>
<p>The precedence rules for derived attributes are as follows:</p>
<p>If a metaslot <code>s</code> is declared <code>multivalued</code> then when copying <code>s</code> from a parent to a child, the values are appended, unless the element already exists.</p>
<p>if the slot is single valued, and intersection rules can be applied to the slot, then these are performed on all values</p>
<p>if the slot is single valued, and intersection rules cannot be applied to the slot, then the following precedence rules are applied:</p>
<ul>
<li>metaslot values from slot_usage take the highest priority</li>
<li>metaslot values from the slot definition take the next highest priority</li>
<li>direct mixins take the next highest priority. where multiple direct mixins are provided as a list, the last element takes highest priority</li>
<li>direct is_as take the next highest priority</li>
<li>the above two rules are applied one level up, and then recursively applied</li>
</ul>
<p>Intersection rules</p>
<table>
<thead>
<tr>
<th>metaslot</th>
<th>rule</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>maximum_value</code></td>
<td><code>min(v1,v2)</code></td>
</tr>
<tr>
<td><code>minimum_value</code></td>
<td><code>max(v1,v2)</code></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td>TBD</td>
</tr>
<tr>
<td><code>range</code></td>
<td><code>IF subsumes(v1,v2) then v2</code> <br/> <code>ELSE IF subsumes(v2,v1) then v2 ELSE UNDEFINED</code></td>
</tr>
</tbody>
</table>
<p>If the result of applying any intersection rule is UNDEFINED then we fall back on precedence rules</p>
<h3 id="rule-default-range">Rule: Default Range</h3>
<p>For all attributes in the derived model, if a range is not assigned using the above method, then the range is assigned a value corresponding
to the value of <code>default_range</code> for the schema in which the slot is defined.</p>
<h3 id="rule-derived-class-and-slot-uris">Rule: Derived Class and Slot URIs</h3>
<p>For each class or slot, if a class_uri or slot_uri is not specified, then this is derived by concatenating <code>m.default_prefix</code> with the CURIE separator <code>:</code> followed by the SafeUpperCamelCase encoding of the name of that class or slot definition</p>
<h3 id="rule-generation-of-patterns-from-structured-patterns">Rule: Generation of patterns from structured patterns</h3>
<p>For any slot <code>s</code>, if <code>s.structured_pattern = p</code> and <code>p</code> is not <strong>None</strong> then <code>s.pattern</code> is assigned a value based on the following
procedure:</p>
<p>If <code>p.interpolated</code> is True, then the value of <code>s.syntax</code> is <em>interpolated</em>, by replacing all occurrences of braced text <code>{VAR}</code>
with the value of <code>VAR</code>. The value of <code>VAR</code> is obtained using <code>m.settings[VAR]</code>, where <em>m</em> is the schema in which <code>p</code> is introduced.</p>
<p>If <code>p.interpolated</code> is not True, then the value of <code>s.syntax</code> is used directly.</p>
<p>If <code>p.partial_match</code> is not True, then <code>s.pattern</code> has a '^' character inserted at the begining and a '$' character inserted as the end.</p>
<h3 id="rule-generation-of-classdefinitionreferences">Rule: Generation of ClassDefinitionReferences</h3>
<p>For every <strong>ClassDefinition</strong> <code>c</code>, if there exists a slot <code>s</code> such that <code>s.identifer=True</code>,
then a corresponding <strong>ClassDefinitionReference</strong> <code>r</code> is generated.</p>
<p><code>r.name</code> is assigned to be the concatenation of <code>c.name</code> and <code>s.name</code></p>
<p><code>r</code> functionally serves as a <em>foreign key</em> to instances of <code>r</code>, and allows for non-inlined
representation of instance references in tree-based formats such as JSON.</p>
<h2 id="structural-conformance-rules">Structural Conformance Rules</h2>
<h3 id="rule-each-referenced-entity-must-be-present">Rule: Each referenced entity must be present</h3>
<p>Every <strong>ClassDefinition</strong>, <strong>ClassDefinitionReference</strong>, <strong>SlotDefinitionReference</strong>, <strong>EnumDefinitionReference</strong>, and <strong>TypeDefinitionReference</strong> must be resolvable within <em>m<sup>D</sup></em></p>
<p>However, not every element needs to be referenced. For example, it is valid to have a list of SlotDefinitions that are never used in <em>m<sup>D</sup></em>.</p>
<h3 id="classdefinition-structural-conformance-rules">ClassDefinition Structural Conformance Rules</h3>
<p>Each <code>c</code> in <em>m<sup>D</sup></em><code>.classes</code> must conform to the rules below:</p>
<ul>
<li><code>c</code> must be an instance of a <strong>ClassDefinition</strong></li>
<li><code>c</code> must have a unique name <code>c.name</code>, and this name must not be shared by any other class or element in <em>m<sup>D</sup></em></li>
<li><code>c</code> lists permissible slots in <code>c.slots</code>, the range of this is a reference to a SlotDefinition in <em>m<sup>D</sup></em><code>.slots</code></li>
<li><code>c</code> defines how slots are used in the context of <code>c</code> via a collection of SlotDefinitions specified in <code>c.slot_usage</code></li>
<li><code>c</code> may define local slots using <code>c.attributes</code>, the value of this is a. collection of SlotDefinitions</li>
<li><code>c</code> may have certain boolean properties defined such as <code>c.mixin</code> and <code>c.abstract</code></li>
<li><code>c</code> must have exactly one value for <code>c.class_uri</code> in <em>m<sup>D</sup></em>, and the value must be an instance of the builtin type UriOrCurie</li>
<li><code>c</code> may have parent ClassDefinitions defined via <code>c.is_a</code> and <code>c.mixins</code><ul>
<li>the value of <code>c.is_a</code> must be a ClassDefinitionReference</li>
<li>the value of <code>c.mixins</code> must be a collection of ClassDefinitonReferences</li>
</ul>
</li>
<li>For any parent <code>p</code> of <code>c</code>, if <code>p.mixin</code> is True, then <code>c.mixin</code> SHOULD be True</li>
<li><code>c</code> includes additional rules in <code>c.rules</code> and <code>c.classificiation_rules</code></li>
<li><code>c</code> may have any number of additional slot-value assignments consistent with the validation rules provided here with the metamodel <code>MM</code></li>
</ul>
<h3 id="slotdefinition-structural-conformance-rules">SlotDefinition Structural Conformance Rules</h3>
<p>Each <code>s</code> in <em>m<sup>D</sup></em><code>.slots</code> must conform to the rules below:</p>
<ul>
<li><code>s</code> must be an instance of a <strong>SlotDefinition</strong></li>
<li><code>s</code> must have a unique name <code>s.name</code>, and this name must not be shared by any other type or element</li>
<li><code>s</code> must have a range specified via <code>s.range</code> in <em>m<sup>D</sup></em></li>
<li><code>s</code> may have an assignment <code>s.identifier</code> which is True if <code>s</code> plays the role of a unique identifier</li>
<li><code>s</code> may have certain boolean properties defined such as <code>s.mixin</code> and <code>s.abstract</code></li>
<li><code>s</code> must have exactly one value for <code>s.slot_uri</code> in <em>m<sup>D</sup></em>, and the value must be an instance of the builtin type UriOrCurie</li>
<li><code>s</code> may have parent SlotDefinitions defined via <code>s.is_a</code> and <code>s.mixins</code><ul>
<li>the value of <code>s.is_a</code> must be a <strong>SlotDefinitionReference</strong></li>
<li>the value of <code>s.mixins</code> must be a collection of <strong>SlotDefinitionReference</strong>s</li>
<li>For any parent <code>p</code> of <code>s</code>, if <code>p.mixin</code> is True, then <code>s.mixin</code> SHOULD be True</li>
</ul>
</li>
<li><code>s</code> may have any number of additional slot-value assignments consistent with the validation rules provided here with the metamodel <code>MM</code></li>
</ul>
<h3 id="typedefinition-structural-conformance-rules">TypeDefinition Structural Conformance Rules</h3>
<p>Each <code>s</code> in <em>m<sup>D</sup></em><code>.types</code> must conform to the rules below:</p>
<ul>
<li><code>t</code> must be an instance of a <strong>TypeDefinition</strong></li>
<li><code>t</code> must have a unique name <code>t.name</code>, and this name must not be shared by any other type or element</li>
<li><code>t</code> must have a mapping to an xsd type provided via <code>t.uri</code> in <em>m<sup>D</sup></em></li>
<li><code>t</code> may have a parent type declared via <code>t.typeof</code></li>
<li><code>t</code> may have any number of additional slot-value assignments consistent with the validation rules provided here with the metamodel <code>MM</code></li>
</ul>
<h3 id="enumdefinition-structural-conformance-rules">EnumDefinition Structural Conformance Rules</h3>
<p>Each <code>e</code> in <em>m<sup>D</sup></em><code>.enums</code> must conform to the rules below:</p>
<ul>
<li><code>e</code> must be an instance of a <strong>EnumDefinition</strong></li>
<li><code>e</code> must have a unique name <code>e.name</code>, and this name must not be shared by any other enum or element</li>
<li><code>e</code> lists all static permissible values via <code>e.permissible_values</code>, the value of which is a list of instances of the MM class PermissibleValue</li>
<li><code>e</code> may have any number of additional slot-value assignments consistent with the validation rules provided here with the metamodel <code>MM</code></li>
</ul>
<h3 id="classdefinitionreference-structural-conformance-rules">ClassDefinitionReference Structural Conformance Rules</h3>
<p>Each <code>r</code> in <em>m<sup>D</sup></em><code>.class_references</code> must conform to the rules below:</p>
<ul>
<li><code>r</code> must be an instance of a <strong>ClassDefinitionReference</strong></li>
<li><code>r</code> must have a unique name <code>r.name</code>, and this name must not be shared by any other type or element</li>
</ul>
<h3 id="metamodel-conformance-rules">Metamodel Conformance Rules</h3>
<p>Both the asserted and derived schema should be valid instances of the LinkML metamodel <strong>MM</strong>
using the instance validation rules described in the next section</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Schema Datamodel" class="md-footer__link md-footer__link--prev" href="../03schemas/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Schema Datamodel
            </div>
</div>
</a>
<a aria-label="Next: Instance Validation" class="md-footer__link md-footer__link--next" href="../05validation/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Instance Validation
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script><script>mermaid.initialize({});</script></body>
</html>